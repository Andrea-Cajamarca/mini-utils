/*! Mini-utils 2014-02-06 */
define(["./promise"],function(a){var b,c,d,e,f,g,h,i,j,k;return k=function(b,c,d,e){var f,g,h,i,j;f=function(a){return 4===i.readyState?(i.removeEventListener(a.type,f),h.resolve(i.status,i.responseText)):void 0},h=new a,i=new XMLHttpRequest,i.open(e,b);for(g in d)j=d[g],i.setRequestHeader(g,j);return i.addEventListener("readystatechange",f),i.send(c),h},f=function(a,b,c){return k(a,b,c,"GET")},h=function(a,b,c){return k(a,b,c,"OPTIONS")},i=function(a,b,c){return k(a,b,c,"POST")},j=function(a,b,c){return k(a,b,c,"PUT")},c=0,g=function(f){var g,h,i;return h=new a,g="jsonp_callback"+ ++c,f+="&callback="+g,i=d(f),e(g,i,h),b(i),h},b=function(a){var b;return b=document.getElementsByTagName("head")[0],b.appendChild(a)},d=function(a){var b;return b=document.createElement("script"),b.async=!0,b.type="application/javascript",b.src=a,b},e=function(a,b,c){return window[a]=function(d){return b.parentNode.removeChild(b),c.resolve(d),delete window[a]}},{get:f,options:h,post:i,put:j,jsonp:g}});